#summary Writing RDF with JRDF

= Writing RDF with JRDF =

JRDF comes with a set of interfaces for implementing various RDF output formats.  RDF/XML and NTriples are currently supported.

== Getting Started ==
The simplest way to persist graphs is to use org.jrdf.writer.Writer which provides default, in memory implementations persisting to NTriples or RDF/XML.

For example, to write NTriples and RDF/XML versions of the same graph:
{{{
Writer.writeNTriples(new File("foo.nt"), graph);
Writer.writeRdfXml(new File("foo.rdf"), graph);
}}}

== Interfaces ==

There are two interfaces: BlankNodeRegistry (TODO: May integrate with Parser's ParserBlankNodeFactory) and RdfWriter.

== BlankNodeRegistry ==

When writing out blank nodes in RDF/XML it is important the the same blank node stored in a graph is persisted with the same blank node identifier.  The BlankNodeRegistry is used to map blank node instances with unique identifiers.

There are currently two implementations: an in memory (MemBlankNodeRegistryImpl) and BDB (BdbBlankNodeRegistryImpl).

== RdfNamespaceMap ==

In order to reduce the verbosity of the RDF/XML that is produced, a map tracks name spaces used and abbreviates the triples produced.  By default only the RDF name space is abbreviated (rdf -> http://www.w3.org/1999/02/22-rdf-syntax-ns#). Others can be added directly using addNamespace.  For example:
{{{
RdfNamespaceMap map = new RdfNamespaceMapImpl();
map.addNamespace("owl", "http://www.w3.org/2002/07/owl#");
}}}

== RdfWriter ==

The interface RdfWriter provides a generic way to implement various ways of persisting RDF.    It takes a Graph and either and OutputStream or Writer.  The caller of the code must ensure that the OutputStream or Writer is closed correctly.

= RDF/XML Implementation =

The RDF/XML implementation requires a JRDF Graph where all the triples in the graph are written to.  

By default, the unique partial URIs are extracted from all of the predicates found in a given Graph (using the load method).  To disable this feature, so that only the RDF name space is used an predicates have a local namespace set the property "org.jrdf.writer.rdfxml.writeLocalNamespace" to "true".

To create an RdfXmlWriter the following code is used (assuming a JRDF Graph, graph, already contains triples):
{{{
StringWriter out = new StringWriter();
try {
  BlankNodeRegistry nodeRegistry = new BlankNodeRegistryImpl();
  RdfNamespaceMap map = new RdfNamespaceMapImpl();
  RdfWriter writer = new RdfXmlWriter(nodeRegistry, map);
  writer.write(graph, out);
} finally {
  out.close();
}
}}}